<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AlocacaoVeiuculo.Pages.UsuarioReservas"
             Title="Minhas Reservas"
             BackgroundColor="{StaticResource BackgroundOverlay}">
    <Grid ColumnDefinitions="Auto, *">
        <!-- Sidebar fixo Ã  esquerda -->
        <StackLayout BackgroundColor="{StaticResource Gray600}" Padding="15" WidthRequest="220" Grid.Column="0">
            <Label Text="Controle de Atendimento" 
                   TextColor="{StaticResource White}" 
                   FontSize="Medium" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center" />

            <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray400}" Margin="0,10,0,20"/>

            <Label Text="MENU" 
                   TextColor="{StaticResource Gray300}" 
                   FontSize="Small" 
                   FontAttributes="Bold"
                   Margin="0,0,0,20" />

            <Button Text="ðŸ‘¤ Meus Dados" 
                    BackgroundColor="{StaticResource ButtonBackground}" 
                    TextColor="{StaticResource ButtonText}" 
                    BorderColor="{StaticResource ButtonBorder}" 
                    BorderWidth="1" 
                    CornerRadius="10"
                    Margin="0,5,0,5"
                    Padding="10,5"
                    FontAttributes="Bold"
                    Clicked="OnMostrarDadosUsuarioClicked" />

            <Button Text="ðŸš— Meus AluguÃ©is" 
                    BackgroundColor="{StaticResource ButtonBackground}" 
                    TextColor="{StaticResource ButtonText}" 
                    BorderColor="{StaticResource ButtonBorder}" 
                    BorderWidth="1" 
                    CornerRadius="10"
                    Margin="0,5,0,5"
                    Padding="10,5"
                    FontAttributes="Bold"
                    Clicked="OnMostrarAlugueisClicked" />

            <Button Text="ðŸ“‹ Alugar VeÃ­culo" 
                    BackgroundColor="{StaticResource ButtonBackground}" 
                    TextColor="{StaticResource ButtonText}" 
                    BorderColor="{StaticResource ButtonBorder}" 
                    BorderWidth="1" 
                    CornerRadius="10"
                    Margin="0,5,0,5"
                    Padding="10,5"
                    FontAttributes="Bold"
                    Clicked="OnSolicitarAluguelClicked" />

            <Button Text="ðŸ˜¿ Cancelar Reserva" 
                    BackgroundColor="{StaticResource ButtonBackground}" 
                    TextColor="{StaticResource ButtonText}" 
                    BorderColor="{StaticResource ButtonBorder}" 
                    BorderWidth="1" 
                    CornerRadius="10"
                    Margin="0,5,0,5"
                    Padding="10,5"
                    FontAttributes="Bold"
                    Clicked="OnCancelarReservaClicked" />

            <StackLayout VerticalOptions="EndAndExpand">
                <Label Text="Â© 2024 Empresa" 
                       TextColor="{StaticResource Gray300}" 
                       FontSize="Small" 
                       HorizontalOptions="Center" 
                       Margin="0,20,0,0"/>
            </StackLayout>
        </StackLayout>

        <!-- ConteÃºdo com barra de rolagem -->
        <ScrollView Grid.Column="1">
            <StackLayout Padding="20" VerticalOptions="Start">
                <Label Text="Minhas Reservas" 
                       FontSize="Large" 
                       FontAttributes="Bold"
                       TextColor="{StaticResource LabelText}"
                       HorizontalOptions="Center" />

                <!-- Painel de dados do usuÃ¡rio -->
                <Frame x:Name="UsuarioDadosPanel" IsVisible="False" BackgroundColor="{StaticResource Gray600}" Padding="15" CornerRadius="10" Margin="0,20,0,20" HasShadow="True">
                    <StackLayout>
                        <Label Text="Dados do UsuÃ¡rio" FontSize="Medium" FontAttributes="Bold" TextColor="{StaticResource LabelText}" />
                        <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray400}" Margin="0,5,0,10"/>
                        <Label x:Name="UsuarioNome" FontSize="Small" TextColor="{StaticResource Gray300}" />
                        <Label x:Name="UsuarioSenha" FontSize="Small" TextColor="{StaticResource Gray300}" />
                        <Label x:Name="UsuarioCpf" FontSize="Small" TextColor="{StaticResource Gray300}" />
                        <Label x:Name="UsuarioDataNascimento" FontSize="Small" TextColor="{StaticResource Gray300}" />
                        <Label x:Name="UsuarioTelefone" FontSize="Small" TextColor="{StaticResource Gray300}" />
                    </StackLayout>
                </Frame>

                <!-- Painel de reservas -->
                <Frame x:Name="ReservasPanel" IsVisible="False" BackgroundColor="{StaticResource Gray600}" Padding="15" CornerRadius="10" Margin="0,20,0,20" HasShadow="True">
                    <ScrollView>
                        <StackLayout x:Name="ReservasPanelContent" />
                    </ScrollView>
                </Frame>

                <!-- Painel para Alugar VeÃ­culo -->
                <Frame x:Name="AlugarVeiculoPanel" IsVisible="False" BackgroundColor="{StaticResource Gray600}" Padding="15" CornerRadius="10" Margin="0,20,0,20" HasShadow="True">
                    <StackLayout>
                        <Label Text="Alugar VeÃ­culo" FontSize="Medium" FontAttributes="Bold" TextColor="{StaticResource LabelText}" />
                        <BoxView HeightRequest="1" BackgroundColor="{StaticResource Gray400}" Margin="0,5,0,10"/>
                        <Entry x:Name="entryLocalRetirada" Placeholder="Local de Retirada" BackgroundColor="{StaticResource EntryBackground}" TextColor="{StaticResource ButtonText}" />
                        <DatePicker x:Name="datePickerRetirada" BackgroundColor="{StaticResource EntryBackground}" TextColor="{StaticResource ButtonText}" />
                        <TimePicker x:Name="timePickerRetirada" BackgroundColor="{StaticResource EntryBackground}" TextColor="{StaticResource ButtonText}" />
                        <DatePicker x:Name="datePickerDevolucao" BackgroundColor="{StaticResource EntryBackground}" TextColor="{StaticResource ButtonText}" />
                        <TimePicker x:Name="timePickerDevolucao" BackgroundColor="{StaticResource EntryBackground}" TextColor="{StaticResource ButtonText}" />
                        <Grid ColumnDefinitions="*,*">
                            <Button Grid.Column="0" 
                                Text="Selecionar Carros" 
                                BackgroundColor="{StaticResource ButtonBackground}" 
                                TextColor="{StaticResource ButtonText}" 
                                BorderColor="{StaticResource ButtonBorder}" 
                                BorderWidth="1" 
                                FontAttributes="Bold" 
                                    Clicked="OnSelecionarCarrosClicked" 
                                HorizontalOptions="FillAndExpand"
                                VerticalOptions="FillAndExpand" />

                            <Button Grid.Column="1" 
                                Text="Selecionar Motos" 
                                BackgroundColor="{StaticResource ButtonBackground}" 
                                TextColor="{StaticResource ButtonText}" 
                                BorderColor="{StaticResource ButtonBorder}" 
                                BorderWidth="1" 
                                FontAttributes="Bold" 
                                     Clicked="OnSelecionarMotosClicked"
                                HorizontalOptions="FillAndExpand"
                                VerticalOptions="FillAndExpand" />
                        </Grid>

                        <Button Text="Finalizar AlocaÃ§Ã£o" 
                                BackgroundColor="{StaticResource ButtonBackground}" 
                                TextColor="{StaticResource ButtonText}" 
                                BorderColor="{StaticResource ButtonBorder}" 
                                BorderWidth="1" 
                                Clicked="OnFinalizarAlocacaoClicked" />
                    </StackLayout>
                </Frame>

                <!-- Painel de veÃ­culos -->
                <Frame x:Name="FrameCaixasVeiculos" IsVisible="False" BackgroundColor="{StaticResource Gray600}" Padding="15" CornerRadius="10" Margin="0,20,0,20" HasShadow="True">
                    <Grid x:Name="GridCaixasVeiculos" ColumnSpacing="10" RowSpacing="10">
                        <!-- Caixas dinÃ¢micas de veÃ­culos -->
                    </Grid>
                </Frame>

                <!-- Popup para confirmar cancelamento -->
                <Frame x:Name="PopupCancelarReserva" 
                       IsVisible="False" 
                       BackgroundColor="{StaticResource Gray600}" 
                       Padding="20" 
                       CornerRadius="10" 
                       VerticalOptions="Center" 
                       HorizontalOptions="Center" 
                       AbsoluteLayout.LayoutBounds="0.5, 0.5, AutoSize, AutoSize" 
                       AbsoluteLayout.LayoutFlags="PositionProportional">
                    <StackLayout Spacing="20">
                        <Label Text="Deseja mesmo cancelar a reserva?" 
                               TextColor="{StaticResource LabelText}" 
                               FontSize="Medium" 
                               HorizontalOptions="Center" />
                        <Image Source="cancela_nao_plz.jpg" 
                               HeightRequest="100" 
                               WidthRequest="100" 
                               HorizontalOptions="Center" />
                        <Grid ColumnDefinitions="*,*">
                            <Button Text="Cancelar" 
                                BackgroundColor="{StaticResource ButtonBackground}" 
                                TextColor="{StaticResource ButtonText}" 
                                BorderColor="{StaticResource ButtonBorder}" 
                                BorderWidth="1" 
                                FontAttributes="Bold" 
                                CornerRadius="10" 
                                Grid.Column="0" 
                                Clicked="OnPopupCancelarClicked" />
                            <Button Text="Confirmar" 
                                BackgroundColor="{StaticResource ButtonBackground}" 
                                TextColor="{StaticResource ButtonText}" 
                                BorderColor="{StaticResource ButtonBorder}" 
                                BorderWidth="1" 
                                FontAttributes="Bold" 
                                CornerRadius="10" 
                                Grid.Column="1" 
                                Clicked="OnPopupConfirmarClicked" />
                        </Grid>
                    </StackLayout>
                </Frame>

                <!-- Lista de Reservas -->
                <CollectionView x:Name="ReservasCollectionView" VerticalOptions="FillAndExpand">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="{StaticResource Gray600}" CornerRadius="10" Padding="15" Margin="0,5" HasShadow="True">
                                <StackLayout>
                                    <Label Text="{Binding VeiculoTipo}" FontAttributes="Bold" FontSize="Medium" TextColor="{StaticResource LabelText}" />
                                    <Label Text="{Binding DataRetirada, StringFormat='Data de Retirada: {0:dd/MM/yyyy}'}" FontSize="Small" TextColor="{StaticResource Gray300}" />
                                    <Label Text="{Binding LocalRetirada, StringFormat='Local de Retirada: {0}'}" FontSize="Small" TextColor="{StaticResource Gray300}" />
                                </StackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </StackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
